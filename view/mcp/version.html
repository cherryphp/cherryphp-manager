<h1 class="page-header">版本发布</h1>
<div class="table-responsive">
	<p>
		<!--<button class="btn btn-sm btn-default hide" type="button">Default</button>-->
		<!--<button class="btn btn-sm btn-primary" type="button" id="B_add">添加</button>-->
		<!--<button class="btn btn-sm btn-success hide" type="button">Success</button>-->
		<!--<button class="btn btn-sm btn-info hide" type="button">Info</button>-->
		<!--<button class="btn btn-sm btn-warning" type="button" id="B_update">修改</button>-->
		<!--<button class="btn btn-sm btn-danger" type="button" id="B_del">删除</button>-->
		<!--<button class="btn btn-sm btn-link hide" type="button">Link</button>-->
    </p>
    <div class="hide" id="alert_all" role="alert">
	</div>
	<table class="table table-striped table-hover" style="background-color:#cccccc;">
    <thead>
    <tr>
      <th>版本信息</th>
	  <th>操作</th>
    </tr>
    </thead>
    <tbody id="rules_data">
		<tr>
			<td class="bs-checkbox">
                <select id='selver' class="selectpicker">
                <?php foreach ($ver_l as $v){ ?>
                    <option <?php if ($dbv[0]['jsondata']==$v){ echo "selected='selected'"; } ?>><?php echo $v; ?></option>
                <?php } ?>
                </select>
            </td>
			<td><?php if (in_array($rules_kv['版本发布-修改'],$rules)){ ?><a href="#" id="do">保存</a><?php } ?></td>
		</tr>
    </tbody>
	</table>
</div>

			
<script>

function chtml(template,data){
	var matchs=template.match(/#@([a-zA-Z0-9]+)@#/gi);
	for(var i=0;i<matchs.length;i++){
		var matchss=matchs[i];
		matchss=matchss.replace(/#|@/gi,"");
		template=template.replace(matchs[i],data[matchss]);
	}
	return template;
}
$(function(){

	$('#do').click(function(){
		
		$.ajax({
			type: "POST",
			url: "/savever",
			data: {'version':$("#selver").val()},
			dataType: "json",
			success: function(data){
				var json=eval(data);
				if (json.stats){
					$('#alert_all').html("保存成功！");
                    $('#alert_all').removeClass().addClass("alert alert-success alert-dismissible");
				}else{
					$('#alert_all').html("保存失败！");
                    $('#alert_all').removeClass().addClass("alert alert-danger alert-dismissible");
				}
			}
		});
	});
});
</script>